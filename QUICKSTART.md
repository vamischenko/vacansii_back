# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 5 –º–∏–Ω—É—Ç ‚ö°

–ó–∞–ø—É—Å—Ç–∏—Ç–µ Vacancy API —Å –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–º –ø–æ–∏—Å–∫–æ–º, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π.

## –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
composer install
```

## –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
./setup_db.sh
```

–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ–¥–µ—Ç –≤–∞—Å —á–µ—Ä–µ–∑ –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π.

### –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1. –°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

**MySQL:**
```bash
mysql -u root -p -e "CREATE DATABASE vakansii_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"
```

**PostgreSQL:**
```bash
psql -U postgres -c "CREATE DATABASE vakansii_db ENCODING 'UTF8';"
```

2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config/db.php` —Å –≤–∞—à–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è.

3. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (–≤–∫–ª—é—á–∞—è FULLTEXT –∏–Ω–¥–µ–∫—Å—ã):

```bash
php yii migrate
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç:
- –¢–∞–±–ª–∏—Ü—É `vacancy` —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏
- **FULLTEXT –∏–Ω–¥–µ–∫—Å—ã** –¥–ª—è –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞
- –î–ª—è PostgreSQL: tsvector –∫–æ–ª–æ–Ω–∫—É —Å —Ç—Ä–∏–≥–≥–µ—Ä–æ–º
- –î–ª—è MySQL: FULLTEXT –∏–Ω–¥–µ–∫—Å –Ω–∞ title –∏ description

## –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

```bash
php seed_data.php
```

## –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
php yii serve --docroot=web --port=8080
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8080`

## –®–∞–≥ 5: –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API (Swagger)

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
http://localhost:8080/swagger-ui.html
```

–ò–ª–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç (ReDoc):

```
http://localhost:8080/redoc.html
```

## –®–∞–≥ 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤–∞–∫–∞–Ω—Å–∏–π:

```bash
curl http://localhost:8080/vacancy
```

### **üîç –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫:**

```bash
curl "http://localhost:8080/vacancy/search?q=PHP —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫"
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–∞–∫–∞–Ω—Å–∏–∏:

```bash
curl http://localhost:8080/vacancy/1
```

### –°–æ–∑–¥–∞–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏:

```bash
curl -X POST http://localhost:8080/vacancy \
  -H "Content-Type: application/json" \
  -d '{
    "title": "PHP Developer",
    "description": "–¢—Ä–µ–±—É–µ—Ç—Å—è –æ–ø—ã—Ç–Ω—ã–π PHP —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫",
    "salary": 150000
  }'
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫:

```bash
# –ü–æ–∏—Å–∫ –ø–æ –æ–¥–Ω–æ–º—É —Å–ª–æ–≤—É
curl "http://localhost:8080/vacancy/search?q=PHP"

# –ü–æ–∏—Å–∫ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Å–ª–æ–≤–∞–º
curl "http://localhost:8080/vacancy/search?q=PHP —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –æ–ø—ã—Ç"

# –ü–æ–∏—Å–∫ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
curl "http://localhost:8080/vacancy/search?q=developer&page=2"

# –ü–æ–∏—Å–∫ —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
curl "http://localhost:8080/vacancy/search?q=PHP&sort=relevance"
```

### –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å–ø–∏—Å–∫–∞:

```bash
# –ü–æ –∑–∞—Ä–ø–ª–∞—Ç–µ (–ø–æ —É–±—ã–≤–∞–Ω–∏—é)
curl "http://localhost:8080/vacancy?sort=salary&order=desc"

# –ü–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è (–ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é)
curl "http://localhost:8080/vacancy?sort=created_at&order=asc"
```

### –í—ã–±–æ—Ä–æ—á–Ω—ã–µ –ø–æ–ª—è:

```bash
curl "http://localhost:8080/vacancy/1?fields=title,salary"
```

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è:

```bash
curl "http://localhost:8080/vacancy?page=2"
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏:

```bash
curl -X PUT http://localhost:8080/vacancy/1 \
  -H "Content-Type: application/json" \
  -d '{"salary": 180000}'
```

### –£–¥–∞–ª–µ–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏:

```bash
curl -X DELETE http://localhost:8080/vacancy/1
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
vakansii-back/
‚îú‚îÄ‚îÄ config/              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ db.php          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ web.php         # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ controllers/         # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ VacancyController.php  # REST API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≤–∞–∫–∞–Ω—Å–∏–π
‚îú‚îÄ‚îÄ models/              # –ú–æ–¥–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ Vacancy.php     # –ú–æ–¥–µ–ª—å –≤–∞–∫–∞–Ω—Å–∏–∏
‚îú‚îÄ‚îÄ migrations/          # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ m250204_000000_create_vacancy_table.php
‚îú‚îÄ‚îÄ web/                 # –ü—É–±–ª–∏—á–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ index.php       # –í—Ö–æ–¥–Ω–∞—è —Ç–æ—á–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ .htaccess       # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Apache
‚îú‚îÄ‚îÄ setup_db.sh         # –°–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î
‚îú‚îÄ‚îÄ seed_data.php       # –°–∫—Ä–∏–ø—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ README_API.md       # –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
‚îî‚îÄ‚îÄ QUICKSTART.md       # –≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
```

## –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
vendor/bin/codecept run

# API —Ç–µ—Å—Ç—ã
vendor/bin/codecept run api

# –¢–µ—Å—Ç—ã –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞
vendor/bin/codecept run api SearchCest

# –¢–µ—Å—Ç—ã rate limiting
vendor/bin/codecept run api RateLimitingCest
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò–∑—É—á–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:**
   - [–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API](README_API.md)
   - [–ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫](FULLTEXT_SEARCH.md)
   - [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ](SETUP_GUIDE.md)
   - [Swagger UI](http://localhost:8080/swagger-ui.html)

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ HTTPS –¥–ª—è production:**

   ```bash
   # –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (—Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç)
   ./setup_ssl_certificates.sh dev

   # –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (Let's Encrypt)
   ./setup_ssl_certificates.sh production
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ CI/CD:**
   - GitHub Actions: `.github/workflows/ci.yml` —É–∂–µ –≥–æ—Ç–æ–≤
   - GitLab CI: `.gitlab-ci.yml` —É–∂–µ –≥–æ—Ç–æ–≤

4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å frontend:**

   ```javascript
   // –ü—Ä–∏–º–µ—Ä –¥–ª—è Nuxt3/Vue
   const searchVacancies = async (query) => {
     const { data } = await useFetch('http://localhost:8080/vacancy/search', {
       params: { q: query }
     });
     return data.value;
   };
   ```

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "404 Not Found"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ mod_rewrite –≤–∫–ª—é—á–µ–Ω –≤ Apache
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª `.htaccess` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `web/`

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `config/db.php`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î

### –û—à–∏–±–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
```bash
chmod -R 777 runtime web/assets
```

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ [README_API.md](README_API.md)
